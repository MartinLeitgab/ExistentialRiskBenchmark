.PHONY: test test-unit test-integration test-cov test-fast clean

# Run all tests
test:
	pytest tests/ -v

# Run only unit tests (fast)
test-unit:
	pytest tests/unit/ -v

# Run only integration tests
test-integration:
	pytest tests/integration/ -v -m integration

# Run with coverage
test-cov:
	pytest tests/ -v --cov=pipeline_a_scenarios --cov-report=html --cov-report=term-missing

# Run fast tests (unit tests in parallel)
test-fast:
	pytest tests/unit/ -v -n auto

# Clean test artifacts
clean:
	rm -rf .pytest_cache
	rm -rf htmlcov
	rm -rf .coverage
	rm -rf tests/__pycache__
	rm -rf tests/unit/__pycache__
	rm -rf tests/integration/__pycache__
	find . -type d -name __pycache__ -exec rm -rf {} +